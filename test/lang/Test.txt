namespace lang;
using lang::Locale.GlobalLocale;

void main () {
    Test<int> obj = new Test<int>();
    obj.obj = new Int(10);
    obj.integer = (Int) obj.obj;
    function<void> func = () -> {
        Console.WriteLine(obj);
    };
    func.run();
    native (source) {
        v_obj.transferOut();
        v_obj.clear();
        v_obj.transferIn();
    }
    func.run();
    Console.WriteLine(obj.integer);
    obj.obj = null;
    Console.WriteLine(obj.integer);
}

public class Test<T> {
    Object obj;
    let Int integer;
    T strong;
    let T weak;

    this() {
        integer = (Int) obj;
    }

    void method(T in) {
        strong = in;
        weak = strong;
    }
}